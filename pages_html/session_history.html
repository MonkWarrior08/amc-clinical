<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Session History - AMC Clinical Exam Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --medical-green: #10b981;
            --medical-green-light: #34d399;
            --medical-green-dark: #059669;
            --medical-bg: #f0fdf4;
            --medical-card: #ffffff;
            --medical-text: #064e3b;
            --medical-text-light: #6b7280;
            --medical-border: #d1fae5;
            --medical-shadow: rgba(16, 185, 129, 0.1);
            --medical-accent: #ecfdf5;
            --medical-warning: #f59e0b;
            --medical-warning-bg: #fef3c7;
            --medical-error: #ef4444;
            --medical-error-bg: #fef2f2;
            --medical-success: #22c55e;
            --medical-success-bg: #dcfce7;
            --medical-info: #3b82f6;
            --medical-info-bg: #dbeafe;
        }
        
        body {
            font-family: 'Inter', sans-serif !important;
            background: linear-gradient(135deg, var(--medical-bg) 0%, #ecfdf5 100%) !important;
            color: var(--medical-text) !important;
            line-height: 1.6 !important;
            min-height: 100vh;
        }
        
        .page-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* Header */
        .header {
            background: var(--medical-card);
            border-bottom: 1px solid var(--medical-border);
            box-shadow: 0 1px 3px var(--medical-shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .logo-icon {
            width: 2.5rem;
            height: 2.5rem;
            background: linear-gradient(135deg, var(--medical-green) 0%, var(--medical-green-light) 100%);
            color: white;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 6px var(--medical-shadow);
        }
        
        .logo-text {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--medical-text);
        }
        
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--medical-text-light);
            font-size: 0.875rem;
        }
        
        .breadcrumb a {
            color: var(--medical-green);
            text-decoration: none;
            transition: color 0.2s ease-out;
        }
        
        .breadcrumb a:hover {
            color: var(--medical-green-dark);
        }
        
        .header-actions {
            display: flex;
            gap: 1rem;
        }
        
        .btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease-out;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            border: none;
        }
        
        .btn-secondary {
            background: none;
            color: var(--medical-text-light);
            border: 1px solid var(--medical-border);
        }
        
        .btn-secondary:hover {
            border-color: var(--medical-green);
            color: var(--medical-green);
        }
        
        .btn-primary {
            background: var(--medical-green);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--medical-green-dark);
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            max-width: 1200px;
            margin: 0 auto;
            padding: 3rem 2rem;
            width: 100%;
        }
        
        /* Page Header */
        .page-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .page-title {
            font-size: 2.5rem;
            font-weight: 600;
            color: var(--medical-text);
            margin-bottom: 0.5rem;
        }
        
        .page-title .highlight {
            color: var(--medical-green);
        }
        
        .page-subtitle {
            font-size: 1.1rem;
            color: var(--medical-text-light);
            max-width: 600px;
            margin: 0 auto 2rem auto;
        }
        
        .summary-stats {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--medical-accent);
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-size: 0.875rem;
            color: var(--medical-green-dark);
            border: 1px solid var(--medical-border);
        }
        
        .stat-value {
            font-weight: 600;
        }
        
        /* Filter and Search */
        .filter-section {
            background: var(--medical-card);
            border: 1px solid var(--medical-border);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 3rem;
            box-shadow: 0 2px 4px var(--medical-shadow);
        }
        
        .filter-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }
        
        .filter-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--medical-text);
        }
        
        .filter-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .filter-label {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--medical-text);
        }
        
        .filter-input,
        .filter-select {
            padding: 0.75rem 1rem;
            border: 1px solid var(--medical-border);
            border-radius: 0.5rem;
            background: var(--medical-card);
            color: var(--medical-text);
            transition: all 0.2s ease-out;
        }
        
        .filter-input:focus,
        .filter-select:focus {
            outline: none;
            border-color: var(--medical-green);
            box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.1);
        }
        
        /* Session List */
        .sessions-section {
            margin-bottom: 3rem;
        }
        
        .section-header {
            display: flex;
            align-items: center;
            justify-content: between;
            margin-bottom: 2rem;
            gap: 1rem;
        }
        
        .section-icon {
            width: 2.5rem;
            height: 2.5rem;
            background: var(--medical-green);
            color: white;
            border-radius: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--medical-text);
            flex: 1;
        }
        
        .view-toggle {
            display: flex;
            background: var(--medical-accent);
            border-radius: 0.5rem;
            padding: 0.25rem;
        }
        
        .toggle-btn {
            padding: 0.5rem 1rem;
            border: none;
            background: none;
            color: var(--medical-text-light);
            cursor: pointer;
            border-radius: 0.25rem;
            transition: all 0.2s ease-out;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .toggle-btn.active {
            background: var(--medical-card);
            color: var(--medical-green);
            box-shadow: 0 1px 2px var(--medical-shadow);
        }
        
        .sessions-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .session-item {
            background: var(--medical-card);
            border: 2px solid var(--medical-border);
            border-radius: 1rem;
            padding: 2rem;
            transition: all 0.3s ease-out;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 4px var(--medical-shadow);
        }
        
        .session-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(180deg, var(--medical-green) 0%, var(--medical-green-light) 100%);
            transform: scaleY(0);
            transition: transform 0.3s ease-out;
        }
        
        .session-item:hover::before {
            transform: scaleY(1);
        }
        
        .session-item:hover {
            transform: translateX(8px);
            box-shadow: 0 8px 25px var(--medical-shadow);
            border-color: var(--medical-green-light);
        }
        
        .session-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 1rem;
        }
        
        .session-main-info {
            flex: 1;
        }
        
        .session-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--medical-text);
            margin-bottom: 0.5rem;
        }
        
        .session-meta {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 0.75rem;
            flex-wrap: wrap;
        }
        
        .meta-badge {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--medical-accent);
            color: var(--medical-green-dark);
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .category-badge {
            background: #f3f4f6;
            color: #6b7280;
        }
        
        .session-status {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 0.5rem;
        }
        
        .outcome-badge {
            padding: 0.5rem 1rem;
            border-radius: 1rem;
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.025em;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .outcome-pass {
            background: var(--medical-success-bg);
            color: var(--medical-success);
        }
        
        .outcome-fail {
            background: var(--medical-error-bg);
            color: var(--medical-error);
        }
        
        .outcome-review {
            background: var(--medical-warning-bg);
            color: var(--medical-warning);
        }
        
        .score-display {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--medical-green);
        }
        
        .session-description {
            color: var(--medical-text-light);
            font-size: 1rem;
            line-height: 1.5;
            margin-bottom: 1.5rem;
        }
        
        .session-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-top: 1rem;
            border-top: 1px solid var(--medical-border);
        }
        
        .session-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        
        .session-tag {
            background: #f9fafb;
            color: #6b7280;
            padding: 0.25rem 0.5rem;
            border-radius: 0.5rem;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .session-arrow {
            color: var(--medical-green);
            transition: transform 0.3s ease-out;
        }
        
        .session-item:hover .session-arrow {
            transform: translateX(4px);
        }
        
        /* Grid View */
        .sessions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
        }
        
        .session-card {
            background: var(--medical-card);
            border: 2px solid var(--medical-border);
            border-radius: 1rem;
            padding: 1.5rem;
            transition: all 0.3s ease-out;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            box-shadow: 0 2px 4px var(--medical-shadow);
            position: relative;
            overflow: hidden;
        }
        
        .session-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--medical-green) 0%, var(--medical-green-light) 100%);
            transform: scaleX(0);
            transition: transform 0.3s ease-out;
        }
        
        .session-card:hover::before {
            transform: scaleX(1);
        }
        
        .session-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px var(--medical-shadow);
            border-color: var(--medical-green-light);
        }
        
        .card-header {
            margin-bottom: 1rem;
        }
        
        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--medical-text);
            margin-bottom: 0.5rem;
        }
        
        .card-meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }
        
        .card-description {
            color: var(--medical-text-light);
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 1rem;
        }
        
        .card-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--medical-text-light);
        }
        
        .empty-icon {
            width: 4rem;
            height: 4rem;
            background: var(--medical-accent);
            color: var(--medical-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem auto;
        }
        
        .empty-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--medical-text);
        }
        
        .empty-description {
            margin-bottom: 1.5rem;
        }
        
        /* Quick Actions */
        .quick-actions {
            background: linear-gradient(135deg, var(--medical-green) 0%, var(--medical-green-light) 100%);
            color: white;
            border-radius: 1rem;
            padding: 2rem;
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .quick-actions-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }
        
        .quick-actions-description {
            margin-bottom: 1.5rem;
            opacity: 0.9;
        }
        
        .quick-actions-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn-white {
            background: white;
            color: var(--medical-green);
        }
        
        .btn-white:hover {
            background: var(--medical-accent);
        }
        
        .btn-transparent {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .btn-transparent:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-header {
            animation: fadeInUp 0.6s ease-out;
        }
        
        .animate-filter {
            animation: fadeInUp 0.6s ease-out 0.2s both;
        }
        
        .animate-sessions {
            animation: fadeInUp 0.6s ease-out 0.4s both;
        }
        
        .animate-actions {
            animation: fadeInUp 0.6s ease-out 0.6s both;
        }
        
        .session-item,
        .session-card {
            animation: fadeInUp 0.4s ease-out both;
        }
        
        .session-item:nth-child(1),
        .session-card:nth-child(1) { animation-delay: 0.1s; }
        .session-item:nth-child(2),
        .session-card:nth-child(2) { animation-delay: 0.2s; }
        .session-item:nth-child(3),
        .session-card:nth-child(3) { animation-delay: 0.3s; }
        .session-item:nth-child(4),
        .session-card:nth-child(4) { animation-delay: 0.4s; }
        .session-item:nth-child(5),
        .session-card:nth-child(5) { animation-delay: 0.5s; }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }
            
            .main-content {
                padding: 2rem 1rem;
            }
            
            .page-title {
                font-size: 2rem;
            }
            
            .summary-stats {
                gap: 1rem;
            }
            
            .filter-controls {
                grid-template-columns: 1fr;
            }
            
            .session-header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }
            
            .session-status {
                align-items: flex-start;
                flex-direction: row;
                gap: 1rem;
            }
            
            .session-meta {
                flex-wrap: wrap;
            }
            
            .session-footer {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }
            
            .sessions-grid {
                grid-template-columns: 1fr;
            }
            
            .quick-actions-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .section-header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }
        }
        
        @media (max-width: 480px) {
            .session-item,
            .session-card {
                padding: 1.5rem;
            }
            
            .session-title,
            .card-title {
                font-size: 1.25rem;
            }
            
            .filter-section {
                padding: 1.5rem;
            }
        }
        
        /* Hidden class for view toggle */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="page-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo-icon">
                        <i data-lucide="graduation-cap" class="w-5 h-5"></i>
                    </div>
                    <div class="logo-text">AMC Clinical Exam Simulator</div>
                </div>
                
                <div class="breadcrumb">
                    <a href="{% url 'dashboard' %}">Dashboard</a>
                    <i data-lucide="chevron-right" class="w-4 h-4"></i>
                    <span>Session History</span>
                </div>
                
                <div class="header-actions">
                    <a href="{% url 'dashboard' %}" class="btn btn-secondary">
                        <i data-lucide="arrow-left" class="w-4 h-4"></i>
                        Back to Dashboard
                    </a>
                    <a href="{% url 'categories' %}" class="btn btn-primary">
                        <i data-lucide="plus" class="w-4 h-4"></i>
                        New Session
                    </a>
                </div>
            </div>
        </header>
        
        <!-- Main Content -->
        <main class="main-content">
            <!-- Page Header -->
            <section class="page-header animate-header">
                <h1 class="page-title">
                    Your <span class="highlight">Session History</span>
                </h1>
                <p class="page-subtitle">
                    Review your past practice sessions, track your progress, and access detailed feedback reports 
                    to continue improving your clinical examination skills.
                </p>
                
                <div class="summary-stats">
                    <div class="stat-item">
                        <i data-lucide="calendar" class="w-4 h-4"></i>
                        <span><span class="stat-value">{{ total_sessions|default:"15" }}</span> Total Sessions</span>
                    </div>
                    <div class="stat-item">
                        <i data-lucide="trending-up" class="w-4 h-4"></i>
                        <span><span class="stat-value">{{ avg_score|default:"78" }}%</span> Average Score</span>
                    </div>
                    <div class="stat-item">
                        <i data-lucide="clock" class="w-4 h-4"></i>
                        <span><span class="stat-value">{{ total_hours|default:"12" }}</span> Practice Hours</span>
                    </div>
                    <div class="stat-item">
                        <i data-lucide="award" class="w-4 h-4"></i>
                        <span><span class="stat-value">{{ pass_rate|default:"87" }}%</span> Pass Rate</span>
                    </div>
                </div>
            </section>
            
            <!-- Filter Section -->
            <section class="filter-section animate-filter">
                <div class="filter-header">
                    <h2 class="filter-title">Filter & Search Sessions</h2>
                </div>
                
                <div class="filter-controls">
                    <div class="filter-group">
                        <label class="filter-label" for="search-input">Search Sessions</label>
                        <input 
                            type="text" 
                            id="search-input" 
                            class="filter-input" 
                            placeholder="Search by patient name or category..."
                            onkeyup="filterSessions()"
                        >
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label" for="outcome-filter">Outcome</label>
                        <select id="outcome-filter" class="filter-select" onchange="filterSessions()">
                            <option value="">All Outcomes</option>
                            <option value="pass">Pass</option>
                            <option value="fail">Needs Improvement</option>
                            <option value="review">Under Review</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label" for="category-filter">Category</label>
                        <select id="category-filter" class="filter-select" onchange="filterSessions()">
                            <option value="">All Categories</option>
                            <option value="cardiovascular">Cardiovascular</option>
                            <option value="respiratory">Respiratory</option>
                            <option value="adolescent">Adolescent Health</option>
                            <option value="aged-care">Aged Care</option>
                            <option value="neurological">Neurological</option>
                            <option value="mental-health">Mental Health</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label" for="date-filter">Date Range</label>
                        <select id="date-filter" class="filter-select" onchange="filterSessions()">
                            <option value="">All Time</option>
                            <option value="week">Last Week</option>
                            <option value="month">Last Month</option>
                            <option value="quarter">Last 3 Months</option>
                            <option value="year">Last Year</option>
                        </select>
                    </div>
                </div>
            </section>
            
            <!-- Sessions Section -->
            <section class="sessions-section animate-sessions">
                <div class="section-header">
                    <div class="section-icon">
                        <i data-lucide="history" class="w-5 h-5"></i>
                    </div>
                    <h2 class="section-title">Practice Sessions</h2>
                    
                    <div class="view-toggle">
                        <button class="toggle-btn active" onclick="toggleView('list')" id="list-toggle">
                            <i data-lucide="list" class="w-4 h-4"></i>
                            List
                        </button>
                        <button class="toggle-btn" onclick="toggleView('grid')" id="grid-toggle">
                            <i data-lucide="grid-3x3" class="w-4 h-4"></i>
                            Grid
                        </button>
                    </div>
                </div>
                
                <!-- List View -->
                <div class="sessions-list" id="sessions-list">
                    <!-- Session 1 -->
                    <a href="{% url 'feedback_report' session_id='1' %}" class="session-item" data-session='{"name":"erin campbell","category":"adolescent","outcome":"pass","date":"2024-12-15","score":75}'>
                        <div class="session-header">
                            <div class="session-main-info">
                                <h3 class="session-title">Erin Campbell</h3>
                                <div class="session-meta">
                                    <div class="meta-badge">
                                        <i data-lucide="calendar" class="w-4 h-4"></i>
                                        <span>Dec 15, 2024</span>
                                    </div>
                                    <div class="meta-badge category-badge">
                                        <i data-lucide="users" class="w-4 h-4"></i>
                                        <span>Adolescent Health</span>
                                    </div>
                                    <div class="meta-badge">
                                        <i data-lucide="clock" class="w-4 h-4"></i>
                                        <span>18 min</span>
                                    </div>
                                </div>
                            </div>
                            <div class="session-status">
                                <div class="outcome-badge outcome-pass">
                                    <i data-lucide="check-circle" class="w-4 h-4"></i>
                                    <span>Pass</span>
                                </div>
                                <div class="score-display">75%</div>
                            </div>
                        </div>
                        
                        <p class="session-description">
                            14-year-old female presenting with facial acne concerns. Focused on communication skills, 
                            psychosocial assessment, and dermatological examination techniques.
                        </p>
                        
                        <div class="session-footer">
                            <div class="session-tags">
                                <span class="session-tag">Dermatology</span>
                                <span class="session-tag">Communication</span>
                                <span class="session-tag">Beginner</span>
                            </div>
                            <i data-lucide="arrow-right" class="w-5 h-5 session-arrow"></i>
                        </div>
                    </a>
                    
                    <!-- Session 2 -->
                    <a href="{% url 'feedback_report' session_id='2' %}" class="session-item" data-session='{"name":"michael roberts","category":"cardiovascular","outcome":"pass","date":"2024-12-12","score":82}'>
                        <div class="session-header">
                            <div class="session-main-info">
                                <h3 class="session-title">Michael Roberts</h3>
                                <div class="session-meta">
                                    <div class="meta-badge">
                                        <i data-lucide="calendar" class="w-4 h-4"></i>
                                        <span>Dec 12, 2024</span>
                                    </div>
                                    <div class="meta-badge category-badge">
                                        <i data-lucide="heart" class="w-4 h-4"></i>
                                        <span>Cardiovascular</span>
                                    </div>
                                    <div class="meta-badge">
                                        <i data-lucide="clock" class="w-4 h-4"></i>
                                        <span>24 min</span>
                                    </div>
                                </div>
                            </div>
                            <div class="session-status">
                                <div class="outcome-badge outcome-pass">
                                    <i data-lucide="check-circle" class="w-4 h-4"></i>
                                    <span>Pass</span>
                                </div>
                                <div class="score-display">82%</div>
                            </div>
                        </div>
                        
                        <p class="session-description">
                            45-year-old male with acute chest pain. Comprehensive cardiovascular assessment including 
                            ECG interpretation, risk stratification, and emergency management protocols.
                        </p>
                        
                        <div class="session-footer">
                            <div class="session-tags">
                                <span class="session-tag">Cardiology</span>
                                <span class="session-tag">Emergency</span>
                                <span class="session-tag">Intermediate</span>
                            </div>
                            <i data-lucide="arrow-right" class="w-5 h-5 session-arrow"></i>
                        </div>
                    </a>
                    
                    <!-- Session 3 -->
                    <a href="{% url 'feedback_report' session_id='3' %}" class="session-item" data-session='{"name":"sarah chen","category":"cardiovascular","outcome":"fail","date":"2024-12-10","score":64}'>
                        <div class="session-header">
                            <div class="session-main-info">
                                <h3 class="session-title">Sarah Chen</h3>
                                <div class="session-meta">
                                    <div class="meta-badge">
                                        <i data-lucide="calendar" class="w-4 h-4"></i>
                                        <span>Dec 10, 2024</span>
                                    </div>
                                    <div class="meta-badge category-badge">
                                        <i data-lucide="heart" class="w-4 h-4"></i>
                                        <span>Cardiovascular</span>
                                    </div>
                                    <div class="meta-badge">
                                        <i data-lucide="clock" class="w-4 h-4"></i>
                                        <span>20 min</span>
                                    </div>
                                </div>
                            </div>
                            <div class="session-status">
                                <div class="outcome-badge outcome-fail">
                                    <i data-lucide="x-circle" class="w-4 h-4"></i>
                                    <span>Needs Improvement</span>
                                </div>
                                <div class="score-display">64%</div>
                            </div>
                        </div>
                        
                        <p class="session-description">
                            32-year-old female with palpitations and anxiety symptoms. Areas for improvement identified 
                            in physical examination technique and differential diagnosis consideration.
                        </p>
                        
                        <div class="session-footer">
                            <div class="session-tags">
                                <span class="session-tag">Arrhythmia</span>
                                <span class="session-tag">Anxiety</span>
                                <span class="session-tag">Intermediate</span>
                            </div>
                            <i data-lucide="arrow-right" class="w-5 h-5 session-arrow"></i>
                        </div>
                    </a>
                    
                    <!-- Session 4 -->
                    <a href="{% url 'feedback_report' session_id='4' %}" class="session-item" data-session='{"name":"margaret thompson","category":"aged-care","outcome":"pass","date":"2024-12-08","score":79}'>
                        <div class="session-header">
                            <div class="session-main-info">
                                <h3 class="session-title">Margaret Thompson</h3>
                                <div class="session-meta">
                                    <div class="meta-badge">
                                        <i data-lucide="calendar" class="w-4 h-4"></i>
                                        <span>Dec 8, 2024</span>
                                    </div>
                                    <div class="meta-badge category-badge">
                                        <i data-lucide="user-check" class="w-4 h-4"></i>
                                        <span>Aged Care</span>
                                    </div>
                                    <div class="meta-badge">
                                        <i data-lucide="clock" class="w-4 h-4"></i>
                                        <span>26 min</span>
                                    </div>
                                </div>
                            </div>
                            <div class="session-status">
                                <div class="outcome-badge outcome-pass">
                                    <i data-lucide="check-circle" class="w-4 h-4"></i>
                                    <span>Pass</span>
                                </div>
                                <div class="score-display">79%</div>
                            </div>
                        </div>
                        
                        <p class="session-description">
                            78-year-old female with multiple comorbidities and medication management concerns. 
                            Complex case involving geriatric assessment and quality of life considerations.
                        </p>
                        
                        <div class="session-footer">
                            <div class="session-tags">
                                <span class="session-tag">Geriatrics</span>
                                <span class="session-tag">Polypharmacy</span>
                                <span class="session-tag">Advanced</span>
                            </div>
                            <i data-lucide="arrow-right" class="w-5 h-5 session-arrow"></i>
                        </div>
                    </a>
                    
                    <!-- Session 5 -->
                    <a href="{% url 'feedback_report' session_id='5' %}" class="session-item" data-session='{"name":"james mitchell","category":"respiratory","outcome":"pass","date":"2024-12-05","score":71}'>
                        <div class="session-header">
                            <div class="session-main-info">
                                <h3 class="session-title">James Mitchell</h3>
                                <div class="session-meta">
                                    <div class="meta-badge">
                                        <i data-lucide="calendar" class="w-4 h-4"></i>
                                        <span>Dec 5, 2024</span>
                                    </div>
                                    <div class="meta-badge category-badge">
                                        <i data-lucide="wind" class="w-4 h-4"></i>
                                        <span>Respiratory</span>
                                    </div>
                                    <div class="meta-badge">
                                        <i data-lucide="clock" class="w-4 h-4"></i>
                                        <span>22 min</span>
                                    </div>
                                </div>
                            </div>
                            <div class="session-status">
                                <div class="outcome-badge outcome-pass">
                                    <i data-lucide="check-circle" class="w-4 h-4"></i>
                                    <span>Pass</span>
                                </div>
                                <div class="score-display">71%</div>
                            </div>
                        </div>
                        
                        <p class="session-description">
                            55-year-old male smoker with chronic cough and breathing difficulties. 
                            Focused on respiratory examination techniques and smoking cessation counseling.
                        </p>
                        
                        <div class="session-footer">
                            <div class="session-tags">
                                <span class="session-tag">COPD</span>
                                <span class="session-tag">Smoking Cessation</span>
                                <span class="session-tag">Beginner</span>
                            </div>
                            <i data-lucide="arrow-right" class="w-5 h-5 session-arrow"></i>
                        </div>
                    </a>
                </div>
                
                <!-- Grid View (Hidden by default) -->
                <div class="sessions-grid hidden" id="sessions-grid">
                    <!-- Grid items will be populated by JavaScript -->
                </div>
                
                <!-- Empty State (Hidden when there are sessions) -->
                <div class="empty-state hidden" id="empty-state">
                    <div class="empty-icon">
                        <i data-lucide="search-x" class="w-8 h-8"></i>
                    </div>
                    <h3 class="empty-title">No Sessions Found</h3>
                    <p class="empty-description">
                        No practice sessions match your current filters. Try adjusting your search criteria 
                        or explore different categories.
                    </p>
                    <a href="{% url 'categories' %}" class="btn btn-primary">
                        <i data-lucide="plus" class="w-4 h-4"></i>
                        Start New Session
                    </a>
                </div>
            </section>
            
            <!-- Quick Actions -->
            <section class="quick-actions animate-actions">
                <h2 class="quick-actions-title">Continue Your Progress</h2>
                <p class="quick-actions-description">
                    Keep practicing with new cases or review areas where you can improve your clinical skills.
                </p>
                
                <div class="quick-actions-buttons">
                    <a href="{% url 'categories' %}" class="btn btn-white">
                        <i data-lucide="play-circle" class="w-4 h-4"></i>
                        Start New Session
                    </a>
                    <a href="{% url 'progress_analytics' %}" class="btn btn-transparent">
                        <i data-lucide="trending-up" class="w-4 h-4"></i>
                        View Progress Analytics
                    </a>
                    <a href="{% url 'study_resources' %}" class="btn btn-transparent">
                        <i data-lucide="book-open" class="w-4 h-4"></i>
                        Study Resources
                    </a>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();
        
        // Current view state
        let currentView = 'list';
        
        // Filter and search functionality
        function filterSessions() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            const outcomeFilter = document.getElementById('outcome-filter').value;
            const categoryFilter = document.getElementById('category-filter').value;
            const dateFilter = document.getElementById('date-filter').value;
            
            const sessionItems = document.querySelectorAll('.session-item');
            let visibleCount = 0;
            
            sessionItems.forEach(item => {
                const sessionData = JSON.parse(item.getAttribute('data-session'));
                
                // Search in name and category
                const nameMatch = sessionData.name.toLowerCase().includes(searchTerm);
                const categorySearchMatch = sessionData.category.toLowerCase().includes(searchTerm);
                const searchMatch = nameMatch || categorySearchMatch;
                
                // Filter by outcome
                const outcomeMatch = !outcomeFilter || sessionData.outcome === outcomeFilter;
                
                // Filter by category
                const categoryMatch = !categoryFilter || sessionData.category === categoryFilter;
                
                // Filter by date (simplified for demo)
                const dateMatch = !dateFilter || true; // Implement actual date filtering as needed
                
                if (searchMatch && outcomeMatch && categoryMatch && dateMatch) {
                    item.style.display = 'block';
                    visibleCount++;
                } else {
                    item.style.display = 'none';
                }
            });
            
            // Show/hide empty state
            const emptyState = document.getElementById('empty-state');
            const sessionsList = document.getElementById('sessions-list');
            const sessionsGrid = document.getElementById('sessions-grid');
            
            if (visibleCount === 0) {
                emptyState.classList.remove('hidden');
                sessionsList.style.display = 'none';
                sessionsGrid.style.display = 'none';
            } else {
                emptyState.classList.add('hidden');
                if (currentView === 'list') {
                    sessionsList.style.display = 'flex';
                    sessionsGrid.style.display = 'none';
                } else {
                    sessionsList.style.display = 'none';
                    sessionsGrid.style.display = 'grid';
                }
            }
            
            // Update grid view if active
            if (currentView === 'grid') {
                updateGridView();
            }
        }
        
        // Toggle between list and grid view
        function toggleView(view) {
            currentView = view;
            const listToggle = document.getElementById('list-toggle');
            const gridToggle = document.getElementById('grid-toggle');
            const sessionsList = document.getElementById('sessions-list');
            const sessionsGrid = document.getElementById('sessions-grid');
            
            if (view === 'list') {
                listToggle.classList.add('active');
                gridToggle.classList.remove('active');
                sessionsList.classList.remove('hidden');
                sessionsGrid.classList.add('hidden');
            } else {
                listToggle.classList.remove('active');
                gridToggle.classList.add('active');
                sessionsList.classList.add('hidden');
                sessionsGrid.classList.remove('hidden');
                updateGridView();
            }
            
            lucide.createIcons();
        }
        
        // Update grid view with filtered sessions
        function updateGridView() {
            const sessionsGrid = document.getElementById('sessions-grid');
            const sessionItems = document.querySelectorAll('.session-item');
            
            // Clear grid
            sessionsGrid.innerHTML = '';
            
            // Add visible sessions to grid as cards
            sessionItems.forEach(item => {
                if (item.style.display !== 'none') {
                    const sessionData = JSON.parse(item.getAttribute('data-session'));
                    const card = createSessionCard(sessionData, item.href);
                    sessionsGrid.appendChild(card);
                }
            });
            
            lucide.createIcons();
        }
        
        // Create session card for grid view
        function createSessionCard(sessionData, href) {
            const card = document.createElement('a');
            card.href = href;
            card.className = 'session-card';
            
            const outcomeClass = `outcome-${sessionData.outcome}`;
            const outcomeIcon = sessionData.outcome === 'pass' ? 'check-circle' : 
                              sessionData.outcome === 'fail' ? 'x-circle' : 'alert-circle';
            const outcomeText = sessionData.outcome === 'pass' ? 'Pass' : 
                              sessionData.outcome === 'fail' ? 'Needs Improvement' : 'Under Review';
            
            card.innerHTML = `
                <div class="card-header">
                    <h3 class="card-title">${sessionData.name}</h3>
                    <div class="card-meta">
                        <div class="meta-badge category-badge">
                            <i data-lucide="calendar" class="w-4 h-4"></i>
                            <span>${sessionData.date}</span>
                        </div>
                        <div class="outcome-badge ${outcomeClass}">
                            <i data-lucide="${outcomeIcon}" class="w-4 h-4"></i>
                            <span>${outcomeText}</span>
                        </div>
                    </div>
                </div>
                <p class="card-description">
                    Clinical examination session focusing on ${sessionData.category} assessment and patient interaction.
                </p>
                <div class="card-footer">
                    <div class="score-display">${sessionData.score}%</div>
                    <i data-lucide="arrow-right" class="w-5 h-5 session-arrow"></i>
                </div>
            `;
            
            return card;
        }
        
        // Add hover effects to session items
        document.querySelectorAll('.session-item, .session-card').forEach(item => {
            item.addEventListener('mouseenter', function() {
                if (this.classList.contains('session-item')) {
                    this.style.transform = 'translateX(8px)';
                } else {
                    this.style.transform = 'translateY(-4px)';
                }
            });
            
            item.addEventListener('mouseleave', function() {
                this.style.transform = '';
            });
            
            item.addEventListener('click', function(e) {
                // Track session click (replace with actual analytics)
                const sessionData = JSON.parse(this.getAttribute('data-session') || '{}');
                console.log('Session clicked:', sessionData.name);
                
                // Add loading state
                const arrow = this.querySelector('.session-arrow');
                if (arrow) {
                    arrow.style.transform = 'rotate(90deg)';
                }
            });
        });
        
        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.target.matches('input, textarea, select')) return;
            
            switch(e.key.toLowerCase()) {
                case '/':
                    e.preventDefault();
                    document.getElementById('search-input').focus();
                    break;
                case 'l':
                    e.preventDefault();
                    toggleView('list');
                    break;
                case 'g':
                    e.preventDefault();
                    toggleView('grid');
                    break;
                case 'escape':
                    document.getElementById('search-input').blur();
                    break;
            }
        });
        
        // Clear search on escape
        document.getElementById('search-input').addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                this.value = '';
                filterSessions();
                this.blur();
            }
        });
        
        // Initialize animations
        function initializeAnimations() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, { threshold: 0.1 });
            
            document.querySelectorAll('.session-item, .session-card').forEach(item => {
                observer.observe(item);
            });
        }
        
        // Export sessions data (placeholder)
        function exportSessions() {
            const sessions = Array.from(document.querySelectorAll('.session-item')).map(item => {
                return JSON.parse(item.getAttribute('data-session'));
            });
            
            const csvContent = "data:text/csv;charset=utf-8," 
                + "Patient Name,Category,Date,Score,Outcome\n"
                + sessions.map(s => `${s.name},${s.category},${s.date},${s.score}%,${s.outcome}`).join("\n");
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "session_history.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializeAnimations();
            filterSessions(); // Initialize with current filter state
            
            console.log('Session history initialized');
        });
        
        // Auto-save filter preferences
        function saveFilterPreferences() {
            const preferences = {
                view: currentView,
                search: document.getElementById('search-input').value,
                outcome: document.getElementById('outcome-filter').value,
                category: document.getElementById('category-filter').value,
                date: document.getElementById('date-filter').value
            };
            
            localStorage.setItem('sessionHistoryFilters', JSON.stringify(preferences));
        }
        
        // Load filter preferences
        function loadFilterPreferences() {
            const saved = localStorage.getItem('sessionHistoryFilters');
            if (saved) {
                const preferences = JSON.parse(saved);
                document.getElementById('search-input').value = preferences.search || '';
                document.getElementById('outcome-filter').value = preferences.outcome || '';
                document.getElementById('category-filter').value = preferences.category || '';
                document.getElementById('date-filter').value = preferences.date || '';
                
                if (preferences.view) {
                    toggleView(preferences.view);
                }
                
                filterSessions();
            }
        }
        
        // Save filters on change
        document.querySelectorAll('#search-input, #outcome-filter, #category-filter, #date-filter').forEach(element => {
            element.addEventListener('change', saveFilterPreferences);
            element.addEventListener('keyup', saveFilterPreferences);
        });
        
        // Load preferences on page load
        loadFilterPreferences();
    </script>
</body>
</html>
